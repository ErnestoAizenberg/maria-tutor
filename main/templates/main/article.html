{% extends 'main/base.html' %}

{% block title %}{{ article.title }}{% endblock %}

{% block content %}

<style>
        .font-serif { font-family: 'Playfair Display', serif; }
        .font-sans { font-family: 'Inter', sans-serif; }

        /* Smooth animations */
        .hover-scale { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .hover-scale:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }

        /* Gradient text */
        .text-gradient { background: linear-gradient(90deg, #ec4899 0%, #f43f5e 100%); -webkit-background-clip: text; background-clip: text; color: transparent; }

        /* Custom bullet points */
        .custom-list li { position: relative; padding-left: 1.75rem; margin-bottom: 0.5rem; }
        .custom-list li:before { content: "•"; position: absolute; left: 0; color: #ec4899; font-weight: bold; }

        /* Article content styling */
        .article-content {
            line-height: 1.7;
            color: #374151;
        }
        .article-content p {
            margin-bottom: 1.5rem;
        }
        .article-content h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
>
font-weight: 700;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            color: #111827;
        }
        .article-content h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 2.5rem;
            margin-bottom: 1.25rem;
            color: #111827;
        }
        .article-content ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .article-content ol {
            list-style-type: decimal;
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .article-content blockquote {
            border-left: 4px solid #ec4899;
            padding-left: 1.5rem;
            margin: 2rem 0;
            font-style: italic;
            color: #4b5563;
        }
        .article-content a {
            color: #ec4899;
            text-decoration: underline;
        }
        .article-content img {
            border-radius: 0.5rem;
            margin: 2rem auto;
            max-width: 100%;
            height: auto;
        }
    </style>

<!-- div to align the article and the related articles -->

<article>

    <!-- Article Header -->
    <section class="meta pt-32 pb-16 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-rose-50 to-white">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-8">
              <span class="inline-block px-3 py-1 text-sm font-medium bg-rose-100 text-rose-800 rounded-full mb-4">{{ article.category|default:"Обучение" }}</span>
                <h1 class="text-3xl sm:text-4xl lg:text-5xl font-serif font-bold leading-tight mb-6">{{ article.title }}</h1>
                {% if article.abstract %}
                <p class="article-abstract text-lg text-gray-600 max-w-3xl mx-auto">{{ article.abstract }}{#Практические методы, которые помогают мне справляться с трудностями концентрации и организации учебного процесса.#}</p>
                {% endif %}
            </div>

            <div class="flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-8 mt-8">
                <div class="flex items-center">
                    <div class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden">
                        <img src="https://img.repetit.ru/teachers/126278/photo/photo_sqr_lrg.jpg?ts=638832935463670000" alt="Мария Серединская" class="h-full w-full object-cover">
                    </div>
                    <div class="ml-3">
                      <p class="text-sm font-medium text-gray-900">{{ article.author.username|default:"Unknown" }}</p>
                      <p class="text-xs text-gray-500">{{ article.created_at|date:"j E Y" }} • {{reading_time}}</p>
                    </div>
                </div>
  <div class="flex items-center space-x-4">
    <!-- Telegram -->
    <a href="https://t.me/{{ article.author.telegram|default:"Mickey_Fin" }}" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-rose-600 transition">
      <i class="fab fa-telegram text-xl"></i>
    </a>

    <!-- VK -->
    <a href="https://vk.com/{{ article.author.vk|default:"Mickey_Fin" }}" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-rose-600 transition">
      <i class="fab fa-vk text-xl"></i>
    </a>

    <!-- Twitter -->
    <a href="https://twitter.com/{{ article.author.twitter|default:"Mickey_Fin" }}" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-rose-600 transition">
      <i class="fab fa-twitter text-xl"></i>
    </a>
  </div>
            </div>
        </div>
    </section>


    <div class="content article-content">
      {{ article.content|safe }}
    </div>

<!-- Article Footer -->
<div class="mt-16 pt-8 border-t border-gray-200 max-w-3xl mx-auto">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6">
        <!-- Author Info (unchanged) -->
        <div class="flex items-center">
            <div class="h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden">
                <img src="https://img.repetit.ru/teachers/126278/photo/photo_sqr_lrg.jpg?ts=638832935463670000"
                     alt="Мария Серединская"
                     class="h-full w-full object-cover">
            </div>
            <div class="ml-4">
                <p class="font-medium text-gray-900">{{ article.author.username }}</p>
                <p class="text-sm text-gray-500">{{ article.author.description|default:"Репетитор по биологии и химии, нейробиолог" }}</p>
            </div>
        </div>

        <!-- Share Component -->
        <div class="flex items-center space-x-4 relative">
            <span class="text-sm text-gray-500">Поделиться:</span>

            <!-- Desktop: Manual Share Buttons -->
            <div id="social-share-buttons" class="hidden sm:flex items-center space-x-4">
                <button onclick="shareOnTelegram()" class="text-gray-500 hover:text-rose-600 transition" aria-label="Поделиться в Telegram">
                    <i class="fab fa-telegram text-xl"></i>
                </button>
                <button onclick="shareOnVK()" class="text-gray-500 hover:text-rose-600 transition" aria-label="Поделиться ВКонтакте">
                    <i class="fab fa-vk text-xl"></i>
                </button>
                <button onclick="shareOnTwitter()" class="text-gray-500 hover:text-rose-600 transition" aria-label="Поделиться в Twitter">
                    <i class="fab fa-twitter text-xl"></i>
                </button>
                <button onclick="copyLink(this)" class="text-gray-500 hover:text-rose-600 transition relative" aria-label="Копировать ссылку">
                    <i class="fas fa-link text-xl"></i>
                    <span id="tooltip" class="absolute -bottom-8 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 transition-opacity duration-300">Скопировано!</span>
                </button>
            </div>

            <!-- Mobile: Native Share Button -->
            <button id="native-share-button" onclick="nativeShare()"
                    class="sm:hidden text-gray-500 hover:text-rose-600 transition"
                    aria-label="Поделиться">
                <i class="fas fa-share-alt text-xl"></i>
            </button>
        </div>
    </div>
</div>

<script>
// --- Configuration ---
const SHARE_DATA = {
    title: document.title,
    text: 'Посмотрите эту статью',
    url: window.location.href
};

// --- Native Sharing (Mobile) ---
function nativeShare() {
    if (navigator.share) {
        navigator.share(SHARE_DATA)
            .catch(err => {
                console.error('Ошибка шаринга:', err);
                showFallbackButtons();
            });
    } else {
        showFallbackButtons();
    }
}

// --- Manual Sharing (Desktop) ---
function shareOnTelegram() {
    window.open(`https://t.me/share/url?url=${encodeURIComponent(SHARE_DATA.url)}&text=${encodeURIComponent(SHARE_DATA.title)}`, '_blank', 'width=550,height=400');
}

function shareOnVK() {
    window.open(`https://vk.com/share.php?url=${encodeURIComponent(SHARE_DATA.url)}&title=${encodeURIComponent(SHARE_DATA.title)}`, '_blank', 'width=550,height=400');
}

function shareOnTwitter() {
    window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(SHARE_DATA.url)}&text=${encodeURIComponent(SHARE_DATA.title)}`, '_blank', 'width=550,height=400');
}

// --- Copy Link with Feedback ---
function copyLink(button) {
    navigator.clipboard.writeText(SHARE_DATA.url)
        .then(() => {
            const tooltip = button.querySelector('#tooltip');
            tooltip.classList.add('opacity-100');
            setTimeout(() => tooltip.classList.remove('opacity-100'), 2000);
        })
        .catch(err => {
            console.error('Ошибка копирования:', err);
            alert('Не удалось скопировать ссылку');
        });
}

// --- Fallback Handling ---
function showFallbackButtons() {
    const fallbackButtons = document.getElementById('social-share-buttons');
    const nativeButton = document.getElementById('native-share-button');

    if (fallbackButtons) {
        fallbackButtons.classList.remove('hidden');
        nativeButton.classList.add('hidden');
    }
}

// --- Initialize ---
document.addEventListener('DOMContentLoaded', () => {
    // Hide native button if Web Share API isn't supported
    if (!navigator.share) {
        document.getElementById('native-share-button').classList.add('hidden');
        document.getElementById('social-share-buttons').classList.remove('hidden');
    }
});
</script>
            <!-- Related Articles -->
            <div class="max-w-3xl mx-auto mt-20">

                <h3 class="text-2xl font-serif font-bold mb-8">Читайте также</h3>

                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Article 1 -->
                    <a href="#" class="group block bg-white rounded-xl overflow-hidden shadow-sm hover-scale border border-gray-200">
                        <div class="h-48 bg-gray-200 relative overflow-hidden">
                            <div class="absolute inset-0 flex items-center justify-center text-gray-400">
                                <i class="fas fa-image fa-3x opacity-30"></i>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="flex items-center text-sm text-gray-500 mb-3">
                                <span>28 апреля 2025</span>
                                <span class="mx-2">•</span>
                                <span>Наука</span>
                            </div>
                            <h3 class="text-xl font-serif font-bold mb-3 group-hover:text-rose-600 transition">Экспедиция к моржам: первые впечатления</h3>
                            <p class="text-gray-600 mb-4">Как организовать полевые исследования, какие трудности возникают и как их преодолевать на практике.</p>
                            <div class="text-rose-600 font-medium inline-flex items-center group-hover:underline">
                                Читать статью <i class="fas fa-arrow-right ml-2 transition-transform group-hover:translate-x-1"></i>
                            </div>
                        </div>
                    </a>

                    <!-- Article 2 -->
                    <a href="#" class="group block bg-white rounded-xl overflow-hidden shadow-sm hover-scale border border-gray-200">
                        <div class="h-48 bg-gray-200 relative overflow-hidden">
                            <div class="absolute inset-0 flex items-center justify-center text-gray-400">
                                <i class="fas fa-image fa-3x opacity-30"></i>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="flex items-center text-sm text-gray-500 mb-3">
                                <span>15 апреля 2025</span>
                                <span class="mx-2">•</span>
                                <span>Обучение</span>
                            </div>
                            <h3 class="text-xl font-serif font-bold mb-3 group-hover:text-rose-600 transition">Как объяснять сложные темы простыми словами</h3>
                            <p class="text-gray-600 mb-4">Методики преподавания, которые помогают сделать сложные биологические концепции доступными для понимания.</p>
                            <div class="text-rose-600 font-medium inline-flex items-center group-hover:underline">
                                Читать статью <i class="fas fa-arrow-right ml-2 transition-transform group-hover:translate-x-1"></i>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
</article>
  {% endblock %}
